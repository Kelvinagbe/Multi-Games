<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title> Multi Games</title>
<!-- Web App Meta Tags -->
 <link rel="stylesheet" href="css/main/main.css">
<link rel="stylesheet" href="css/model/model.css"
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Multi Games">
  <meta name="application-name" content="Multi Games">
  <meta name="mobile-web-app-capable" content="yes">
  
  <!-- App Icons -->
  <link rel="icon" href="./assets/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
  <link rel="apple-touch-icon" href="./assets/icon-192.png">
   <link rel="manifest" href="manifest.json">

<!-- Firebase App SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
<!-- Firebase Messaging SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging-compat.js"></script>

<link rel="canonical" href="https://multi-games-fawn.vercel.app/index.html">

<!-- Improve viewport for iOS full screen (for notches) -->


<!-- Optional but recommended: Apple Startup Screens (splash screens) -->
<link rel="apple-touch-startup-image" href="./assets/icon-192.png" media="(device-width: 375px) and (device-height: 812px)">
<!-- (Add more if you want full device support) -->
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Play multiple games in one convenient web app">
  <meta name="keywords" content="games, multi games, online games, web games">
  <meta name="author" content="Kelvin Agbe">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://multi-games-fawn.vercel.app/">
  <meta property="og:title" content="Multi Games">
  <meta property="og:description" content="Collection of fun games to play online and offline">
  <meta property="og:image" content="https://multi-games-fawn.vercel.app/og-image.jpg">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Multi Games">
  <meta name="twitter:description" content="Collection of fun games to play online">
  <meta name="twitter:image" content="og-image.jpg">

<!-- Owl Carousel CSS -->
<link rel="stylesheet" href="assets/css/src/owl-carousel/owl.carousel.min.css">
<link rel="stylesheet" href="assets/css/src/owl-carousel/owl.theme.default.css">
<!-- Owl Carousel JS (place before your custom script) -->
<script src="assets/js/plugins/owl-carousel/owl.carousel.min.js"></script>
<script src="./js/startJS.js" defer></script>

  <script async custom-element="amp-auto-ads"
    src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5345992350931230"
    crossorigin="anonymous"></script>
<script async src="https://fundingchoicesmessages.google.com/i/pub-5345992350931230?ers=1"></script><script>(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>

<!-- WebSite Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Multi Games",
  "url": "https://multi-games-fawn.vercel.app",
  "author": {
    "@type": "Person",
    "name": "Kelvin Agbe"
  },
  "description": "Play free fun games on Multi Games â€“ your favorite hub for endless gaming!",
  "inLanguage": "en",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://multi-games-fawn.vercel.app/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<!-- Organization Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Multi Games",
  "url": "https://multi-games-fawn.vercel.app",
  "logo": "https://multi-games-fawn.vercel.app/logo.png",
  "founder": "Kelvin Agbe",
  "foundingDate": "2024-01-01",
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "multigames0000@gmail.com",
    "contactType": "Customer Support"
  },
  "sameAs": [
    "https://facebook.com/multigames",
    "https://twitter.com/multigames"
  ]
}
</script>

<!-- FAQ Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Multi Games?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Multi Games is a free gaming hub where you can play multiple games and earn rewards like airtime."
      }
    },
    {
      "@type": "Question",
      "name": "Can I earn airtime by playing?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! You earn airtime by meeting daily gameplay targets."
      }
    },
    {
      "@type": "Question",
      "name": "Is registration required?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No registration is needed. Just open the site and start playing!"
      }
    }
  ]
}
</script>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PB8Y87E6XV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-PB8Y87E6XV');
</script>
<script
  src="https://speed.vercel.dev/script.js"
  data-sdkn="vercel"
  data-sdkv="1.0.0"
  defer
></script>
<link rel="stylesheet" href="css/ads/ads.css">

</head>
<body>
<div id="notification-container"></div>

 <!-- Install App Banner -->
<div id="installBanner" style="display: none; position: fixed; top: 0; left: 0; width: 100%; background-color: #0f5132; color: white; padding: 10px 20px; z-index: 1000; box-shadow: 0 2px 6px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: space-between; font-family: sans-serif;">
<div style="display: flex; align-items: center;">
 <img src="./assets/favicon-32x32.png" alt="App Logo" style="width: 40px; height: 40px; border-radius: 8px; margin-right: 10px;">
  <div>
   <div style="font-size: 16px; font-weight: bold;">Multi Games</div>
   <div style="font-size: 12px;">Install this app for a better experience</div>
  </div>
 </div>
<button id="installButton" style="background-color: white; color: #0f5132; border: none; padding: 8px 16px; border-radius: 20px; font-weight: bold; cursor: pointer;">Install</button>
</div>

   
  <div id="adblockMessage" class="adblock-message">
        <span class="close-button" onclick="closeAdBlockMessage()">&times;</span>
        <h3>Ad Blocker Detected</h3>
        <p>We've noticed you're using an ad blocker. While we respect your choice, we rely on advertising revenue to keep our content free and accessible to everyone. Please consider whitelisting our website to support us!</p>
  </div>
  
     <div class="popup-container" id="popupContainer">
        <!-- Popups will be inserted here by JavaScript -->
    </div>

  <amp-auto-ads type="adsense"
      data-ad-client="ca-pub-5345992350931230">
  </amp-auto-ads>

  <!-- UPDATED: Loader with Circle -->
  <div class="loader-container" id="loader">
      <div class="m-loader">M</div>
  </div>



<!-- Updated HTML without a search button -->
<div class="floating-search" id="floating-search">
    <div class="search-bar">
        <i class="fas fa-search" id="search-icon"></i>
        <input 
            type="text" 
            id="floating-search-input" 
            placeholder="Search games..." 
        >
    </div>
    <div id="floating-suggestions" class="suggestions-container"></div>
</div>


    



  <!-- Main Content Container -->
  <div class="container main-content" id="main-content">
      <!-- Featured Game -->
      <div class="featured">
          <img src="https://i.postimg.cc/zfv3jnNr/truth.jpg" alt="Featured Game">
          <div class="featured-overlay">
              <h3>Truth or Dare</h3>
              <p>Challenge your friends with the ultimate party game!</p>
              <a href="truth.html" class="featured-btn">Play Now</a>
          </div>
      </div>


<!-- Chat toggle button -->
    <div class="chat-toggle" id="chat-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
    </div>



      <!-- Categories Horizontal Scroll -->
      <div class="section-header">
          <h2>Categories</h2>
          <a href="#" class="view-all" id="view-all-categories">View All</a>
      </div>
      <div class="categories">
          <div class="category">
              <i class="fas fa-gamepad"></i>
              <p>Arcade</p>
          </div>
          <div class="category">
              <i class="fas fa-brain"></i>
              <p>Puzzle</p>
          </div>
          <div class="category">
              <i class="fas fa-running"></i>
              <p>Action</p>
          </div>
          <div class="category">
              <i class="fas fa-users"></i>
              <p>Multiplayer</p>
          </div>
          <div class="category">
              <i class="fas fa-dice"></i>
              <p>Card Games</p>
          </div>
          <div class="category">
              <i class="fas fa-trophy"></i>
              <p>Sports</p>
          </div>
      </div>

           <!-- Popular Games -->
        <div class="section-header">
            <h2>Popular Games</h2>
            <a href="popular.html" class="view-all">View All</a>


        </div>
        <div class="game-grid">
            <div class="game-card">
                <div style="position: relative;">
                    <img src="https://i.postimg.cc/hvXFjbH2/memory.jpg" alt="Memory Card">
                    <div class="new-ribbon">NEW</div>
                </div>
                <div class="game-info">
                    <p>Games james</p>
                    <div class="game-meta">
                        <i class="fas fa-star"></i> 4.8
                        <span style="margin-left: 10px;"><i class="fas fa-user"></i> 10k+</span>
                    </div>
                    <a href="./games/memory.html" class="play-btn game-link">Play Now</a>
                </div>
            </div>
            <div class="game-card">
                <img src="https://i.postimg.cc/tJtT7bVC/IMG-20250226-WA0077.jpg" alt="Whack Mole">
                  <div class="new-ribbon">NEW</div>
                <div class="game-info">
                    <p>Whack Mole</p>
                    <div class="game-meta">
                        <i class="fas fa-star"></i> 4.5
                        <span style="margin-left: 10px;"><i class="fas fa-user"></i> 8k+</span>
                    </div>
                    <a href="games/whack.html" class="play-btn game-link">Play Now</a>
                </div>
            </div>
            <div class="game-card">
                <img src="https://i.postimg.cc/CL3qTdQn/images-12.jpg" alt="Tic Tac Toe">
       <div class="game-info">
                    <p>Tic Tac Toe</p>
                    <div class="game-meta">
                        <i class="fas fa-star"></i> 4.7
                        <span style="margin-left: 10px;"><i class="fas fa-user"></i> 15k+</span>
                    </div>
                    <a href="./games/tic-tac-toe.html" class="play-btn game-link">Play Now</a>
                </div>
            </div>
            <div class="game-card">
                <img src="https://i.postimg.cc/zfv3jnNr/truth.jpg" alt="Truth or Dare">
                <div class="game-info">
                    <p>Truth or Dare</p>
                    <div class="game-meta">
                        <i class="fas fa-star"></i> 4.9
                        <span style="margin-left: 10px;"><i class="fas fa-user"></i> 20k+</span>
                    </div>
                    <a href="./games/truth.html" class="play-btn game-link">Play Now</a>
                </div>
            </div>
        </div>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5345992350931230"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="fluid"
     data-ad-layout-key="-fb+5w+4e-db+86"
     data-ad-client="ca-pub-5345992350931230"
     data-ad-slot="1925101979"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        
        <!-- New Releases -->
        <div class="section-header">
            <h2>New Releases</h2>
            <a href="new.html" class="view-all">View All</a>
        </div>
     
    <div class="ad-wrapper">
        <!-- Placeholder that will continue flashing until real ad content appears -->
        <div class="ad-placeholder" id="adPlaceholder1">
            <div class="placeholder-item placeholder-header"></div>
            <div class="placeholder-item placeholder-title"></div>
            <div class="placeholder-item placeholder-text line-1"></div>
            <div class="placeholder-item placeholder-text line-2"></div>
            <div class="placeholder-item placeholder-button"></div>
            <div class="placeholder-item placeholder-image"></div>
            <div class="ad-label">AD</div>
        </div>
        
        <!-- Hidden container for AdSense -->
        <div class="adsbygoogle-container" id="adContainer1" style="visibility: hidden;">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5345992350931230"
                crossorigin="anonymous"></script>
            <!-- In-feed ads -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-5345992350931230"
                data-ad-slot="8886337393"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
 
<main>
    <div id="gamesContainer" class="game-grid"></div>
  </main>


    


        
    



  <!-- Categories Page Content (Full Screen) -->
  <div class="page-content" id="categories-content">
    <div class="back-button" id="categories-back"><i class="fas fa-chevron-left"></i></div>
    <iframe src="nav/categories/categories.html" id="categories-iframe" class="page-iframe"></iframe>
  </div>
 

    
<!-- Game Modal -->
<div id="gameModal" class="game-modal">
    <div class="game-fullpage">
        <!-- Power button for exit -->
        <div class="power-button" id="modal-power-button" title="Exit Game">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.85;">
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                <line x1="12" y1="2" x2="12" y2="12"></line>
            </svg>
        </div>

        <!-- Loading screen -->
        <div class="loading-screen" id="modal-loading-screen">
            <p>Loading game...</p>
        </div>
        
        <!-- Game iframe container -->
        <div id="modal-game-content"></div>
        
        <!-- Info button and panel -->
        <div class="info-button" id="modal-info-button">i</div>
        <div class="info-panel" id="modal-info-panel">
            <h3>About this game</h3>
            <p id="modal-game-description"></p>
            <h3>How to play</h3>
            <p id="modal-game-instructions"></p>
        </div>
        
        <!-- Blur overlay -->
        <div class="blur-overlay" id="modal-blur-overlay"></div>
        
        <!-- Exit confirmation dialog with ad space -->
        <div class="exit-dialog" id="modal-exit-dialog">
            <div class="exit-dialog-content">
                <h3>Are you sure you want to exit?</h3>
                <p>You will lose your current game progress.</p>
                
                <!-- Ad container -->
                <div class="ad-container">
                    <p>Advertisement Space</p>
                    <!-- Ad code would go here -->
                </div>
                
                <div class="exit-dialog-buttons">
                    <button class="exit-dialog-button stay-button" id="modal-stay-button">Stay</button>
                    <button class="exit-dialog-button exit-button" id="modal-exit-button">Exit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chatbot Iframe Container -->
<div id="chatbot-iframe-container" class="page-content">
    <!-- Back Button -->
    <div class="back-button" id="close-chatbot">
        <i class="fas fa-arrow-left"></i> <!-- Using FontAwesome for back icon -->
    </div>

    <!-- The iframe will be injected by JavaScript -->
<div id="chatbot-loader" style="
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  color: var(--primary-color);
">
  Loading...
</div>
</div>

  <!-- earn Page Content (Full Screen) -->
  <div class="page-content" id="earn-content">
    <div class="back-button" id="earn-back"><i class="fas fa-chevron-left"></i></div>
    <iframe src="nav/earn.html" id="earn-iframe" class="page-iframe"></iframe>
  </div>

  <!-- Profile Page Content (Full Screen) -->
  <div class="page-content" id="profile-content">
    <div class="back-button" id="profile-back"><i class="fas fa-chevron-left"></i></div>
    <iframe src="nav/profile.html" id="profile-iframe" class="page-iframe"></iframe>
  </div>

    <!-- NEW: Page Content for Notifications (Full Screen) -->
    <div class="page-content" id="notification-content">
        <iframe src="about:blank" id="notification-iframe" class="page-iframe"></iframe>
    </div>

  <!-- Bottom Navigation (Reduced Size) -->
  <div class="bottom-nav">
      <a href="#" id="home-nav" class="active"><i class="fas fa-home"></i> Home</a>
      <a href="#" id="categories-nav"><i class="fas fa-th"></i> Categories</a>
     // <a href="#" id="trending-nav"><i class="fas fa-fire"></i> Trending</a>
      <a href="#" id="earn-nav"><i class="fas fa-sack-dollar"></i> Earn</a>
      <a href="#" id="profile-nav"><i class="fas fa-user"></i> Profile</a>
  </div>


<!-- dark mode script -->
<script src="darkmode.js"></script>
    <script src"js/ads/ads.js"></script>
  
    <!-- Include Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>



  <!-- JavaScript for Loader, Navigation, and Floating Search Bar Visibility -->

  <script>
   // Initialize Global Variables
let gamesData = [];
let searchTimeout;
const loaderDelay = 1500; // Loader delay in ms
let deferredPrompt;

// Set "visited before" flag 
localStorage.setItem("visitedBefore", "true");

// DOM Content Loaded Event
document.addEventListener("DOMContentLoaded", function() {
    // Hide loader after delay
    setTimeout(() => {
        document.getElementById('loader').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
        }, 500);
    }, loaderDelay);
    
    // Add CSS for iframe loaders
    addIframeLoaderStyles();

    // Initialize search functionality
    initSearch();
    
    // Initialize navigation
    initNavigation();
    
    // Initialize dark mode
    initDarkMode();
    
    // Initialize real ad block detection
    detectAdBlockReal();
    
    // Show welcome popup for new users
    checkForFirstVisit();
    
    // Lazy load images
    lazyLoadImages();
    
    // Initialize install button if it exists
    initPWAInstall();
});


// Initialize Search Functionality
function initSearch() {
    const searchInput = document.getElementById('floating-search-input');
    const suggestionsContainer = document.getElementById('floating-suggestions');
    
    // Fetch games data (mocked here, should be replaced with actual data)
    fetchGamesData();
    
    searchInput.addEventListener('focus', function() {
        document.getElementById('floating-search').style.width = '95%';
    });
    
    searchInput.addEventListener('input', function() {
        clearTimeout(searchTimeout);
        const query = this.value.trim();
        
        if (query.length > 0) {
            searchTimeout = setTimeout(() => {
                searchGames(query);
            }, 300);
        } else {
            suggestionsContainer.innerHTML = '';
            suggestionsContainer.classList.remove('show');
        }
    });
    
    // Close search when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.floating-search')) {
            suggestionsContainer.classList.remove('show');
        }
    });
}

// Fetch Games Data
function fetchGamesData() {
    // This would normally be an API call - for now we'll use data from the HTML
    const gameCards = document.querySelectorAll('.game-card');
    gameCards.forEach(card => {
        const img = card.querySelector('img');
        const title = card.querySelector('.game-info p').textContent;
        const rating = card.querySelector('.game-meta i').nextSibling.textContent.trim();
        const link = card.querySelector('.play-btn').getAttribute('href');
        
        gamesData.push({
            title: title,
            image: img.src,
            rating: rating,
            link: link
        });
    });
}

// Search Games
function searchGames(query) {
    const suggestionsContainer = document.getElementById('floating-suggestions');
    suggestionsContainer.innerHTML = '';
    
    const filteredGames = gamesData.filter(game => 
        game.title.toLowerCase().includes(query.toLowerCase())
    );
    
    if (filteredGames.length > 0) {
        filteredGames.forEach(game => {
            const suggestionItem = document.createElement('div');
            suggestionItem.className = 'suggestion-item';
            suggestionItem.innerHTML = `
                <img src="${game.image}" alt="${game.title}">
                <div class="suggestion-text">
                    <div class="suggestion-title">${game.title}</div>
                    <div class="suggestion-meta">Rating: ${game.rating}</div>
                </div>
            `;
            
            suggestionItem.addEventListener('click', () => {
                window.location.href = game.link;
            });
            
            suggestionsContainer.appendChild(suggestionItem);
        });
        
        suggestionsContainer.classList.add('show');
    } else {
        const noResults = document.createElement('div');
        noResults.className = 'suggestion-item';
        noResults.innerHTML = `
            <div class="suggestion-text">
                <div class="suggestion-title">No games found</div>
            </div>
        `;
        suggestionsContainer.appendChild(noResults);
        suggestionsContainer.classList.add('show');
    }
}

// Initialize Navigation
function initNavigation() {
    // Home Navigation
    document.getElementById('home-nav').addEventListener('click', function(e) {
        e.preventDefault();
        showMainContent();
    });
    
    // Categories Navigation
    document.getElementById('categories-nav').addEventListener('click', function(e) {
        e.preventDefault();
        const categoriesContent = document.getElementById('categories-content');
        categoriesContent.style.display = 'flex';
        
        // Show iframe loader
        showIframeLoader(categoriesContent);
        
        const categoriesIframe = document.getElementById('categories-iframe');
        categoriesIframe.style.opacity = '0'; // Hide iframe initially
        categoriesIframe.src = 'nav/categories/categories.html';
        
        // Handle iframe load completion
        categoriesIframe.onload = function() {
            hideIframeLoader(categoriesContent);
            categoriesIframe.style.opacity = '1'; // Show iframe with fade effect
            
            // Apply slide-in animation
            categoriesIframe.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                categoriesIframe.style.transition = 'transform 0.5s ease-out';
                categoriesIframe.style.transform = 'translateX(0)';
            }, 50);
        };
        
        // Keep navigation bar visible
        document.querySelector('.bottom-nav').style.display = 'flex';
        updateActiveNav('categories-nav');
    });
    
    document.getElementById('categories-back').addEventListener('click', function() {
        const iframe = document.getElementById('categories-iframe');
        // Slide out animation
        iframe.style.transition = 'transform 0.5s ease-in';
        iframe.style.transform = 'translateX(100%)';
        
        setTimeout(() => {
            document.getElementById('categories-content').style.display = 'none';
            showMainContent(); // Reset to main content when back button is pressed
        }, 500);
    });
    
    // View All Categories
    document.getElementById('view-all-categories').addEventListener('click', function(e) {
        e.preventDefault();
        const categoriesContent = document.getElementById('categories-content');
        categoriesContent.style.display = 'flex';
        
        // Show iframe loader
        showIframeLoader(categoriesContent);
        
        const categoriesIframe = document.getElementById('categories-iframe');
        categoriesIframe.style.opacity = '0'; // Hide iframe initially
        categoriesIframe.src = 'nav/categories/categories.html';
        
        // Handle iframe load completion
        categoriesIframe.onload = function() {
            hideIframeLoader(categoriesContent);
            categoriesIframe.style.opacity = '1'; // Show iframe with fade effect
            
            // Apply slide-in animation
            categoriesIframe.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                categoriesIframe.style.transition = 'transform 0.5s ease-out';
                categoriesIframe.style.transform = 'translateX(0)';
            }, 50);
        };
        
        // Keep navigation bar visible
        document.querySelector('.bottom-nav').style.display = 'flex';
        updateActiveNav('categories-nav');
    });
    
    // Trending Navigation
    document.getElementById('trending-nav').addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelectorAll('.container').forEach(container => {
            container.style.display = 'none';
        });
        document.getElementById('trending-content').style.display = 'block';
        updateActiveNav('trending-nav');
        
        // Ensure navigation bar is visible
        document.querySelector('.bottom-nav').style.display = 'flex';
    });
    
    // Earn Navigation
    document.getElementById('earn-nav').addEventListener('click', function(e) {
        e.preventDefault();
        const earnContent = document.getElementById('earn-content');
        earnContent.style.display = 'flex';
        
        // Show iframe loader
        showIframeLoader(earnContent);
        
        const earnIframe = document.getElementById('earn-iframe');
        earnIframe.style.opacity = '0'; // Hide iframe initially
        earnIframe.src = 'nav/earn.html';
        
        // Handle iframe load completion
        earnIframe.onload = function() {
            hideIframeLoader(earnContent);
            earnIframe.style.opacity = '1'; // Show iframe with fade effect
            
            // Apply slide-in animation
            earnIframe.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                earnIframe.style.transition = 'transform 0.5s ease-out';
                earnIframe.style.transform = 'translateX(0)';
            }, 50);
        };
        
        // Ensure navigation bar is visible
        document.querySelector('.bottom-nav').style.display = 'flex';
        updateActiveNav('earn-nav');
    });
    
    document.getElementById('earn-back').addEventListener('click', function() {
        if (this.parentElement) {
            const iframe = document.getElementById('earn-iframe');
            // Slide out animation
            iframe.style.transition = 'transform 0.5s ease-in';
            iframe.style.transform = 'translateX(100%)';
            
            setTimeout(() => {
                document.getElementById('earn-content').style.display = 'none';
                showMainContent(); // Reset to main content when back button is pressed
            }, 500);
        }
    });
    
    // Profile Navigation
    document.getElementById('profile-nav').addEventListener('click', function(e) {
        e.preventDefault();
        // Hide all containers first
        document.querySelectorAll('.container').forEach(container => {
            container.style.display = 'none';
        });
        
        const profileContent = document.getElementById('profile-content');
        profileContent.style.display = 'flex';
        
        // Show iframe loader
        showIframeLoader(profileContent);
        
        const profileIframe = document.getElementById('profile-iframe');
        profileIframe.style.opacity = '0'; // Hide iframe initially
        profileIframe.src = 'nav/profile.html';
        
        // Handle iframe load completion
        profileIframe.onload = function() {
            hideIframeLoader(profileContent);
            profileIframe.style.opacity = '1'; // Show iframe with fade effect
            
            // Apply slide-in animation
            profileIframe.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                profileIframe.style.transition = 'transform 0.5s ease-out';
                profileIframe.style.transform = 'translateX(0)';
            }, 50);
        };
        
        // Keep navigation bar visible
        document.querySelector('.bottom-nav').style.display = 'flex';
        updateActiveNav('profile-nav');
    });
    
    document.getElementById('profile-back').addEventListener('click', function() {
        const iframe = document.getElementById('profile-iframe');
        // Slide out animation
        iframe.style.transition = 'transform 0.5s ease-in';
        iframe.style.transform = 'translateX(100%)';
        
        setTimeout(() => {
            document.getElementById('profile-content').style.display = 'none';
            showMainContent(); // Reset to main content when back button is pressed
        }, 500);
    });
}

// Show Main Content
function showMainContent() {
    document.querySelectorAll('.container').forEach(container => {
        container.style.display = 'none';
    });
    document.getElementById('main-content').style.display = 'block';
    // Ensure navigation bar is visible
    document.querySelector('.bottom-nav').style.display = 'flex';
    updateActiveNav('home-nav');
}

// Update Active Navigation
function updateActiveNav(activeId) {
    document.querySelectorAll('.bottom-nav a').forEach(item => {
        item.classList.remove('active');
    });
    document.getElementById(activeId).classList.add('active');
}

// Initialize Dark Mode
function initDarkMode() {
    // Create dark mode toggle button
    const darkModeToggle = document.createElement('div');
    darkModeToggle.className = 'dark-mode-toggle';
 
    document.body.appendChild(darkModeToggle);
    
    // Check for saved theme preference
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    
    // Apply saved preference
    if (isDarkMode) {
        document.body.classList.add('dark-mode');
    }
    
    // Toggle dark mode on click
    darkModeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDark);
    });
}

// Real Ad Blocker Detection
function detectAdBlockReal() {
    // Create a test ad element
    const testAd = document.createElement('div');
    testAd.className = 'ads ad adsbox doubleclick ad-placement carbon-ads';
    testAd.innerHTML = '&nbsp;';
    testAd.style.position = 'absolute';
    testAd.style.top = '-999px';
    testAd.style.left = '-999px';
    testAd.style.height = '1px';
    testAd.style.width = '1px';
    
    document.body.appendChild(testAd);
    
    // Check if the ad element is hidden (ad blocker active)
    setTimeout(() => {
        // If the element's height is 0, ad blocker is active
        const isAdBlocked = testAd.offsetHeight === 0 || 
                           window.getComputedStyle(testAd).display === 'none' || 
                           !document.body.contains(testAd);
        
        if (isAdBlocked) {
            // Show ad block message
            document.getElementById('adblockMessage').style.display = 'block';
            console.log('Ad blocker detected');
        } else {
            console.log('No ad blocker detected');
        }
        
        // Remove the test element
        if (document.body.contains(testAd)) {
            document.body.removeChild(testAd);
        }
    }, 100);
    
    // Alternative method using a fake ad request
    const testScript = document.createElement('script');
    testScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
    testScript.onerror = function() {
        // Show ad block message if script failed to load
        document.getElementById('adblockMessage').style.display = 'block';
        console.log('Ad blocker detected (script method)');
    };
    document.body.appendChild(testScript);
}

// Close Ad Block Message
function closeAdBlockMessage() {
    document.getElementById('adblockMessage').style.display = 'none';
}

// Check for First Visit
function checkForFirstVisit() {
    const isFirstVisit = localStorage.getItem('firstVisit') !== 'false';
    
    if (isFirstVisit) {
        showWelcomePopup();
        localStorage.setItem('firstVisit', 'false');
    }
}

// Show Welcome Popup
function showWelcomePopup() {
    const popupContainer = document.getElementById('popupContainer');
    
    const popup = document.createElement('div');
    popup.className = 'popup';
    popup.innerHTML = `
        <div class="popup-close">&times;</div>
        <h3 class="popup-title">Welcome to Multi Games!</h3>
        <div class="popup-content">
            <p>Thanks for downloading our app! Get ready to play the best mobile games for free.</p>
            <p>Explore our categories, play trending games, and have fun!</p>
        </div>
        <button class="popup-button">Start Playing</button>
    `;
    
    popupContainer.appendChild(popup);
    popupContainer.style.visibility = 'visible';
    popupContainer.style.opacity = '1';
    
    // Close popup on close button click
    popup.querySelector('.popup-close').addEventListener('click', () => {
        popupContainer.style.opacity = '0';
        setTimeout(() => {
            popupContainer.style.visibility = 'hidden';
            popupContainer.innerHTML = '';
        }, 300);
    });
    
    // Close popup on button click
    popup.querySelector('.popup-button').addEventListener('click', () => {
        popupContainer.style.opacity = '0';
        setTimeout(() => {
            popupContainer.style.visibility = 'hidden';
            popupContainer.innerHTML = '';
        }, 300);
    });
}


// Lazy Load Images
function lazyLoadImages() {
    const gameImages = document.querySelectorAll('.game-card img');
    
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.src; // Keep the original src
                    imageObserver.unobserve(img);
                }
            });
        });
        
        gameImages.forEach(img => {
            imageObserver.observe(img);
        });
    }
}

// Service Worker Registration for PWA
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        // Register service worker with scope parameter to work on localhost
        navigator.serviceWorker.register('./service-worker.js', { scope: './' })
            .then(function(registration) {

                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(function(err) {
                console.log('ServiceWorker registration failed: ', err);
            });
    });
}

// Prevent default behavior for all game links to enable analytics tracking
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('game-link') || e.target.parentElement.classList.contains('game-link')) {
        const link = e.target.classList.contains('game-link') ? e.target : e.target.parentElement;
        const href = link.getAttribute('href');
        const gameName = link.closest('.game-card').querySelector('.game-info p').textContent;
        
        // Track analytics (placeholder for actual analytics code)
        console.log(`Game clicked: ${gameName}`);
        
        // Allow default behavior to continue
    }
});

// Function to handle category clicks
function handleCategoryClick(category) {
    // This would filter games by category
    console.log(`Category clicked: ${category}`);
}

// Add click listeners to categories
document.querySelectorAll('.category').forEach(categoryElement => {
    categoryElement.addEventListener('click', function() {
        const categoryName = this.querySelector('p').textContent;
        handleCategoryClick(categoryName);
    });
});

// Create and add iframe loader styles
function addIframeLoaderStyles() {
    const styleEl = document.createElement('style');
    styleEl.innerHTML = `
        .iframe-loader-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 10;
        }
        
        .dark-mode .iframe-loader-container {
            background-color: rgba(30, 30, 30, 0.8);
        }
        
        .flashing-m {
            font-size: 4rem;
            font-weight: bold;
            font-family: 'Arial', sans-serif;
            animation: flashM 1.2s infinite;
            color: #006600; /* Dark green color */
        }
        
        @keyframes flashM {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .iframe-container iframe {
            transition: opacity 0.3s ease, transform 0.5s ease-out;
        }
    `;
    document.head.appendChild(styleEl);
}

// Show iframe loader
function showIframeLoader(container) {
    // Create loader if it doesn't exist
    let loader = container.querySelector('.iframe-loader-container');
    if (!loader) {
        loader = document.createElement('div');
        loader.className = 'iframe-loader-container';
        loader.innerHTML = '<div class="flashing-m">M</div>';
        container.appendChild(loader);
    } else {
        loader.style.display = 'flex';
    }
}

// Hide iframe loader
function hideIframeLoader(container) {
    const loader = container.querySelector('.iframe-loader-container');
    if (loader) {
        loader.style.opacity = '0';
        setTimeout(() => {
            loader.style.display = 'none';
        }, 300);
    }
}
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    // PWA Installation
    let deferredPrompt;
    const installBanner = document.getElementById('installBanner');
    const installButton = document.getElementById('installButton');
    
    if (installBanner && installButton) {
        // Initially hide the banner
        installBanner.style.display = 'none';
        
        // Check if already installed
        if (window.matchMedia('(display-mode: standalone)').matches || 
            window.navigator.standalone === true) {
            installBanner.style.display = 'none';
        }
        
        // Before install prompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Only show if not in standalone mode
            if (!window.matchMedia('(display-mode: standalone)').matches) {
                installBanner.style.display = 'flex';
            }
        });
        
        // Install button click
        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                // Hide banner after user makes a choice
                installBanner.style.display = 'none';
                deferredPrompt = null;
            }
        });
        
        // App installed event
        window.addEventListener('appinstalled', () => {
            installBanner.style.display = 'none';
            deferredPrompt = null;
        });
    }
});
</script>
<!-- Add this script block wherever you want in your index.html (preferably before the closing </body> tag) -->

<script>
// Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyBw1uA-kNKOZEufWKZ9AMBxvRGHNGF1lkA",
  authDomain: "multi-games-a2561.firebaseapp.com",
  databaseURL: "https://multi-games-a2561-default-rtdb.firebaseio.com",
  projectId: "multi-games-a2561",
  storageBucket: "multi-games-a2561.appspot.com",
  messagingSenderId: "150551898066",
  appId: "1:150551898066:web:4e8fb185f2321ba4140a0b",
  measurementId: "G-PB8Y87E6XV"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const messaging = firebase.messaging();

// Wait for the DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
  // Get notification container
  const container = document.getElementById('notification-container');
  
  // If no container is found, create one
  if (!container) {
    const newContainer = document.createElement('div');
    newContainer.id = 'notification-container';
    newContainer.style.padding = '20px';
    newContainer.style.margin = '20px 0';
    document.body.appendChild(newContainer);
    
    // Use the new container
    initializeNotifications(newContainer);
  } else {
    // Use the existing container
    initializeNotifications(container);
  }
});

function initializeNotifications(container) {
  // Create status element
  const statusElement = document.createElement('div');
  statusElement.textContent = 'Initializing notifications...';
  container.appendChild(statusElement);
  
  // Check if the browser supports service workers
  if ('serviceWorker' in navigator) {
    // Register the service worker
    navigator.serviceWorker.register('./firebase-messaging-sw.js')
      .then(registration => {
        console.log('Service Worker registered with scope:', registration.scope);
        statusElement.textContent = 'Service Worker registered. Requesting permission...';
        
        // Create button for permission request
        const permissionButton = document.createElement('button');
        permissionButton.textContent = 'Enable Notifications';
        permissionButton.style.padding = '10px 20px';
        permissionButton.style.backgroundColor = '#4285F4';
        permissionButton.style.color = 'white';
        permissionButton.style.border = 'none';
        permissionButton.style.borderRadius = '4px';
        permissionButton.style.cursor = 'pointer';
        permissionButton.style.margin = '10px 0';
        container.appendChild(permissionButton);
        
        permissionButton.onclick = function() {
          Notification.requestPermission().then((permission) => {
            if (permission === "granted") {
              statusElement.textContent = "Permission granted! Getting token...";
              permissionButton.style.display = 'none';
              
              // Get Token with your provided VAPID key
              messaging.getToken({ 
                vapidKey: "BMcnZnq4TDu23XvkA8icF4zxDeX_ctw-x42B73ulQb72rDTj-LOgK-rHAeKtoFozQXa7j5XMF82Ay8PE5G9ACUw",
                serviceWorkerRegistration: registration
              }).then((currentToken) => {
                if (currentToken) {
                  console.log("FCM Token:", currentToken);
                  statusElement.textContent = "Notifications enabled successfully!";
                  
                  // Display the token
                  const tokenDisplay = document.createElement('div');
                  tokenDisplay.style.wordBreak = 'break-all';
                  tokenDisplay.style.backgroundColor = '#f5f5f5';
                  tokenDisplay.style.padding = '10px';
                  tokenDisplay.style.marginTop = '10px';
                  tokenDisplay.style.fontSize = '12px';
                  tokenDisplay.textContent = `Token: ${currentToken}`;
                  container.appendChild(tokenDisplay);
                } else {
                  statusElement.textContent = "Failed to get token";
                }
              }).catch((err) => {
                statusElement.textContent = "Error: " + err.message;
                console.error("Error getting token:", err);
              });
            } else {
              statusElement.textContent = "Notification permission denied";
              permissionButton.textContent = "Permission Denied";
              permissionButton.style.backgroundColor = "#f44336";
            }
          });
        };
      })
      .catch(err => {
        statusElement.textContent = 'Service Worker registration failed: ' + err.message;
        console.error('Service Worker registration failed:', err);
      });
  } else {
    statusElement.textContent = 'Service Workers not supported in this browser';
  }
}

// Handle foreground messages
messaging.onMessage((payload) => {
  console.log('Message received in foreground:', payload);
  // Display notification
  const notificationTitle = payload.notification?.title || 'New Message';
  const notificationOptions = {
    body: payload.notification?.body || 'You have a new notification',
    icon: '/logo.png'
  };
  
  new Notification(notificationTitle, notificationOptions);
});
</script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('firebase-messaging-sw.js')
    .then(function(registration) {
      console.log('Service Worker registered with scope:', registration.scope);
    }).catch(function(err) {
      console.error('Service Worker registration failed:', err);
    });
  }
</script>
<script>
 
            // Request permission and get token
            statusElement.textContent = 'Requesting notification permission...';
            Notification.requestPermission().then((permission) => {
              if (permission === "granted") {
</script>
<script>
function openChatbotIframe() {
    const container = document.getElementById('chatbot-iframe-container');
    const chatToggle = document.getElementById('chat-toggle');
    const loader = document.getElementById('chatbot-loader');

    // Hide chat toggle button
    chatToggle.style.display = 'none';

    // Show loader
    loader.style.display = 'flex';

    // If iframe not created yet, create it
    if (!container.querySelector('iframe')) {
        const iframe = document.createElement('iframe');
        iframe.src = '/bot/chatbot.html';
        iframe.className = 'page-iframe';
        iframe.onload = () => {
            // Hide loader once iframe is fully loaded
            loader.style.display = 'none';
        };
        container.appendChild(iframe);
    } else {
        // If already created, still wait for load and hide loader
        loader.style.display = 'none';
    }

    container.style.display = 'flex'; // Show the page-content fullscreen
}

function closeChatbotIframe() {
    const container = document.getElementById('chatbot-iframe-container');
    const chatToggle = document.getElementById('chat-toggle');

    container.style.display = 'none'; // Hide the iframe page
    chatToggle.style.display = 'flex'; // Show back the chat toggle button
}

// Open chatbot iframe when clicking the chat-toggle button
document.getElementById('chat-toggle').addEventListener('click', openChatbotIframe);

// Close chatbot iframe when clicking the back button
document.getElementById('close-chatbot').addEventListener('click', closeChatbotIframe);
</script>
<script src="js/lib/games-main.js"></script>
  <script src="js/lib/games.js"></script>

</body>
</html>
